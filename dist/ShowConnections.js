function A(n){window.enmity.plugins.registerPlugin(n)}const y=window.enmity.modules.common.Constants;window.enmity.modules.common.Clipboard,window.enmity.modules.common.Assets,window.enmity.modules.common.Messages,window.enmity.modules.common.Clyde,window.enmity.modules.common.Avatars,window.enmity.modules.common.Native;const o=window.enmity.modules.common.React;window.enmity.modules.common.Dispatcher,window.enmity.modules.common.Storage,window.enmity.modules.common.Toasts,window.enmity.modules.common.Dialog,window.enmity.modules.common.Token,window.enmity.modules.common.REST,window.enmity.modules.common.Settings,window.enmity.modules.common.Users,window.enmity.modules.common.Navigation,window.enmity.modules.common.NavigationNative,window.enmity.modules.common.NavigationStack,window.enmity.modules.common.Theme,window.enmity.modules.common.Linking;const P=window.enmity.modules.common.StyleSheet;window.enmity.modules.common.ColorMap,window.enmity.modules.common.Components,window.enmity.modules.common.Locale,window.enmity.modules.common.Profiles,window.enmity.modules.common.Lodash,window.enmity.modules.common.Logger,window.enmity.modules.common.Flux,window.enmity.modules.common.SVG,window.enmity.modules.common.Scenes,window.enmity.modules.common.Moment;const x={byProps:(...n)=>window.enmity.modules.filters.byProps(...n),byName:(n,i)=>window.enmity.modules.filters.byName(n,i),byTypeName:(n,i)=>window.enmity.modules.filters.byTypeName(n,i),byDisplayName:(n,i)=>window.enmity.modules.filters.byDisplayName(n,i)};function L(...n){return window.enmity.modules.bulk(...n)}function l(...n){return window.enmity.modules.getByProps(...n)}function M(...n){return window.enmity.modules.getByName(...n)}window.enmity.modules.common;function O(n){return window.enmity.patcher.create(n)}var k="ShowConnections",B="1.0.0",V="",_=[{name:"FutureMapper",profile:"https://github.com/Futuremappermydud",id:"741727188809810181"}],U={source:"https://github.com/Futuremappermydud/Emnity-ShowConnections/",dist:"https://github.com/Futuremappermydud/Emnity-ShowConnections/blob/main/dist/ShowConnections.js"},R={name:k,version:B,description:V,authors:_,links:U};const{components:e}=window.enmity;e.Alert,e.Button,e.FlatList;const H=e.Image;e.ImageBackground,e.KeyboardAvoidingView,e.Modal,e.Pressable,e.RefreshControl;const G=e.ScrollView;e.SectionList,e.StatusBar,e.StyleSheet,e.Switch;const p=e.Text;e.TextInput,e.TouchableHighlight;const f=e.TouchableOpacity;e.TouchableWithoutFeedback,e.Touchable;const S=e.View;e.VirtualizedList,e.Form,e.FormArrow,e.FormCTA,e.FormCTAButton,e.FormCardSection,e.FormCheckbox,e.FormDivider,e.FormHint,e.FormIcon,e.FormInput,e.FormLabel;const b=e.FormRadio,F=e.FormRow;e.FormSection,e.FormSelect,e.FormSubLabel,e.FormSwitch,e.FormTernaryCheckBox,e.FormText,e.FormTextColors,e.FormTextSizes;const t=P.createThemedStyleSheet({creditsContainer:{paddingTop:30,paddingLeft:20,flexDirection:"row"},creditsTextContainer:{paddingLeft:15,paddingTop:5,flexDirection:"column",flexWrap:"wrap"}}),T=window.enmity.modules.common.Components.General.Animated,[D,Z]=L(x.byProps("transitionToGuild","openURL"),x.byProps("setString"));var Y=({manifest:n})=>{const i=o.useRef(new T.Value(1)).current,r=()=>{T.spring(i,{toValue:1.1,duration:250,useNativeDriver:!0}).start()},s=()=>{T.spring(i,{toValue:1,duration:250,useNativeDriver:!0}).start()},m=()=>D.openURL(n.links.source),g={transform:[{scale:i}]};return o.createElement(S,{style:t.creditsContainer},o.createElement(f,{onPress:m,onPressIn:r,onPressOut:s},o.createElement(T.View,{style:[g]},o.createElement(H,{style:[t.creditsImage],source:{uri:"https://cdn.spin.rip/r/l9uevwe4ia0.jpg"}}))),o.createElement(S,{style:t.creditsTextContainer},o.createElement(f,{onPress:m},o.createElement(p,{style:[t.creditsMainText,t.creditsHeader]},n.name)),o.createElement(S,{style:{flexDirection:"row"}},o.createElement(p,{style:[t.creditsMainText,t.creditsSubHeader]},"A plugin by"),n.authors.map((c,h,d)=>o.createElement(f,{onPress:()=>D.openURL(c.profile)},o.createElement(p,{style:[t.creditsMainText,t.safeText,t.creditsSubHeader,{paddingLeft:4,fontFamily:y.Fonts.DISPLAY_BOLD,flexDirection:"row"}]},c.name,h<d.length-1?",":null)))),o.createElement(S,null,o.createElement(f,{style:{flexDirection:"row"}},o.createElement(p,{style:[t.creditsMainText,t.creditsSubHeader]},"Version:"),o.createElement(p,{style:[t.creditsMainText,t.creditsSubHeader,{paddingLeft:4,fontFamily:y.Fonts.DISPLAY_BOLD}]},n.version)))))},z=({settings:n})=>o.createElement(G,null,o.createElement(Y,{manifest:R}),o.createElement(F,{label:"Compact",trailing:o.createElement(b,{value:!1})}),o.createElement(F,{label:"Cozy",trailing:o.createElement(b,{value:!0})}),o.createElement(F,{label:"Roomy",trailing:o.createElement(b,{value:!1})}));function j(n,i,r){return window.enmity.utilities.findInReactTree(n,i,r)}const{useThemeContext:K}=l("useThemeContext"),{meta:{resolveSemanticColor:W}}=l("colors","meta"),$=M("UserProfileSection");l("UserProfileGradientCard"),l("triggerHaptic");const X=l("getUserProfile");l("isSupported","getByUrl"),P.createThemedStyleSheet({container:{alignSelf:"flex-start",padding:1,borderRadius:9,width:"100%",marginTop:-4,marginRight:-12},innerContainer:{paddingHorizontal:6,paddingVertical:8,overflow:"hidden",flexDirection:"row",justifyContent:"center",alignItems:"center"},circle:{width:10,height:10,borderRadius:10/2,marginRight:6},fallback:{color:y.ThemeColorMap.BACKGROUND_SECONDARY_ALT},text:{fontFamily:y.Fonts.DISPLAY_NORMAL}});var q=({userId:n,theme:i})=>{const r=K();W(r.theme,y.ThemeColorMap.TEXT_NORMAL);const s=X.getUserProfile(n);if(!s)return null;const m=s.connectedAccounts;return m!=null&&m.length?o.createElement($,{title:"Connections"}):null};const I=l("startTyping"),v=O("show-connections"),J=l("PRIMARY_INFO_TOP_OFFSET","SECONDARY_INFO_TOP_MARGIN","SIDE_PADDING"),Q={...R,onStart(){v.instead(I,"startTyping",()=>{}),v.instead(I,"stopTyping",()=>{}),v.after(J.default,"type",(n,i,r)=>{var s,m,g,c,h;const d=(m=(s=j(r,a=>{var u,w;return((u=a==null?void 0:a.type)==null?void 0:u.displayName)==="View"&&((w=a==null?void 0:a.props)==null?void 0:w.children.findIndex(C=>{var E;return((E=C==null?void 0:C.type)==null?void 0:E.name)==="UserProfileBio"}))!==-1}))==null?void 0:s.props)==null?void 0:m.children;if(!d)return r;const{userId:N}=(h=(c=(g=d==null?void 0:d.find(a=>{var u,w;return typeof((w=(u=a==null?void 0:a.props)==null?void 0:u.displayProfile)==null?void 0:w.userId)=="string"}))==null?void 0:g.props)==null?void 0:c.displayProfile)!=null?h:{};d.unshift(o.createElement(q,{userId:N,theme:"dark"}))})},onStop(){v.unpatchAll()},getSettingsPanel({settings:n}){return o.createElement(z,{settings:n})}};A(Q);
