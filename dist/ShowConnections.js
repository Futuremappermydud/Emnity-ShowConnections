function W(e){window.enmity.plugins.registerPlugin(e)}const y=window.enmity.modules.common.Constants;window.enmity.modules.common.Clipboard,window.enmity.modules.common.Assets,window.enmity.modules.common.Messages,window.enmity.modules.common.Clyde,window.enmity.modules.common.Avatars,window.enmity.modules.common.Native;const n=window.enmity.modules.common.React;window.enmity.modules.common.Dispatcher,window.enmity.modules.common.Storage,window.enmity.modules.common.Toasts,window.enmity.modules.common.Dialog,window.enmity.modules.common.Token,window.enmity.modules.common.REST,window.enmity.modules.common.Settings,window.enmity.modules.common.Users,window.enmity.modules.common.Navigation,window.enmity.modules.common.NavigationNative,window.enmity.modules.common.NavigationStack,window.enmity.modules.common.Theme,window.enmity.modules.common.Linking;const k=window.enmity.modules.common.StyleSheet;window.enmity.modules.common.ColorMap,window.enmity.modules.common.Components,window.enmity.modules.common.Locale,window.enmity.modules.common.Profiles,window.enmity.modules.common.Lodash,window.enmity.modules.common.Logger,window.enmity.modules.common.Flux,window.enmity.modules.common.SVG,window.enmity.modules.common.Scenes,window.enmity.modules.common.Moment;const T={byProps:(...e)=>window.enmity.modules.filters.byProps(...e),byName:(e,t)=>window.enmity.modules.filters.byName(e,t),byTypeName:(e,t)=>window.enmity.modules.filters.byTypeName(e,t),byDisplayName:(e,t)=>window.enmity.modules.filters.byDisplayName(e,t)};function B(...e){return window.enmity.modules.bulk(...e)}function z(...e){return window.enmity.modules.getByProps(...e)}function j(...e){return window.enmity.modules.getByName(...e)}window.enmity.modules.common;function q(e){return window.enmity.patcher.create(e)}var J="ShowConnections",Q="1.0.5",X="",Z=[{name:"FutureMapper",profile:"https://github.com/Futuremappermydud",id:"741727188809810181"}],ee={source:"https://github.com/Futuremappermydud/Emnity-ShowConnections/",dist:"https://github.com/Futuremappermydud/Emnity-ShowConnections/blob/main/dist/ShowConnections.js"},s={name:J,version:Q,description:X,authors:Z,links:ee};const{components:o}=window.enmity;o.Alert,o.Button,o.FlatList;const V=o.Image;o.ImageBackground,o.KeyboardAvoidingView,o.Modal,o.Pressable,o.RefreshControl;const M=o.ScrollView;o.SectionList,o.StatusBar,o.StyleSheet,o.Switch;const b=o.Text;o.TextInput;const oe=o.TouchableHighlight,C=o.TouchableOpacity;o.TouchableWithoutFeedback,o.Touchable;const w=o.View;o.VirtualizedList,o.Form,o.FormArrow,o.FormCTA,o.FormCTAButton,o.FormCardSection,o.FormCheckbox,o.FormDivider,o.FormHint,o.FormIcon,o.FormInput,o.FormLabel;const S=o.FormRadio,p=o.FormRow;o.FormSection,o.FormSelect,o.FormSubLabel;const ne=o.FormSwitch;o.FormTernaryCheckBox,o.FormText,o.FormTextColors,o.FormTextSizes;function g(e,t,i){window.enmity.settings.set(e,t,i)}function h(e,t,i){return window.enmity.settings.get(e,t,i)}function U(e,t,i){return window.enmity.settings.getBoolean(e,t,i)}const H=(e=.1)=>({shadowColor:"#000",shadowOffset:{width:1,height:4},shadowOpacity:e,shadowRadius:4.65,elevation:8}),c=k.createThemedStyleSheet({container:{marginTop:25,marginLeft:"5%",marginBottom:-15,flexDirection:"row"},textContainer:{paddingLeft:15,paddingTop:5,flexDirection:"column",flexWrap:"wrap",...H},image:{width:75,height:75,borderRadius:10,...H},mainText:{opacity:.975,letterSpacing:.25},header:{color:y.ThemeColorMap.HEADER_PRIMARY,fontFamily:y.Fonts.DISPLAY_BOLD,fontSize:25,letterSpacing:.25},subHeader:{color:y.ThemeColorMap.HEADER_SECONDARY,fontSize:12.75}}),E=window.enmity.modules.common.Components.General.Animated,[G]=B(T.byProps("transitionToGuild","openURL"));var te=({manifest:e})=>{const t=n.useRef(new E.Value(1)).current,i=()=>{E.spring(t,{toValue:1.1,duration:250,useNativeDriver:!0}).start()},m=()=>{E.spring(t,{toValue:1,duration:250,useNativeDriver:!0}).start()},d=()=>G.openURL(e.links.source),f={transform:[{scale:t}]};return n.createElement(w,{style:c.container},n.createElement(C,{onPress:d,onPressIn:i,onPressOut:m},n.createElement(E.View,{style:f},n.createElement(V,{style:[c.image],source:{uri:"https://cdn.discordapp.com/avatars/741727188809810181/8bb5f28abad304e8f5983d077bdf9ae9.png"}}))),n.createElement(w,{style:c.textContainer},n.createElement(C,{onPress:()=>G.openURL(e.links.source)},n.createElement(b,{style:[c.mainText,c.header]},e.name)),n.createElement(w,{style:{flexDirection:"row"}},n.createElement(b,{style:[c.mainText,c.subHeader]},"A project by ",e.authors[0].name)),n.createElement(w,null,n.createElement(C,{style:{flexDirection:"row"}},n.createElement(b,{style:[c.mainText,c.subHeader]},"Version:"),n.createElement(b,{style:[c.mainText,c.subHeader,{paddingLeft:4,fontFamily:y.Fonts.DISPLAY_BOLD}]},e.version)))))};const ie=(e=.1)=>({shadowColor:"#000",shadowOffset:{width:1,height:4},shadowOpacity:e,shadowRadius:4.65,elevation:8}),me=k.createThemedStyleSheet({container:{width:"90%",marginTop:25,marginLeft:"5%",borderRadius:10,backgroundColor:y.ThemeColorMap.BACKGROUND_MOBILE_SECONDARY,shadow:ie}});var re=({settings:e})=>n.createElement(M,null,n.createElement(te,{manifest:s}),n.createElement(w,{style:[me.container]},n.createElement(p,{label:"Compact",trailing:n.createElement(S,{selected:h(s.name,"mode","cozy")==="compact"}),onPress:()=>{g(s.name,"mode","compact")}}),n.createElement(p,{label:"Cozy",trailing:n.createElement(S,{selected:h(s.name,"mode","cozy")==="cozy"}),onPress:()=>{g(s.name,"mode","cozy")}}),n.createElement(p,{label:"Roomy",trailing:n.createElement(S,{selected:h(s.name,"mode","cozy")==="roomy"}),onPress:()=>{g(s.name,"mode","roomy")}}),n.createElement(p,{label:"Extreme",trailing:n.createElement(S,{selected:h(s.name,"mode","cozy")==="extreme"}),onPress:()=>{g(s.name,"mode","extreme")}}),n.createElement(p,{label:"Keep Original Connections",subLabel:"Whether to keep the original connections in popout or to hide them",trailing:n.createElement(ne,{value:U(s.name,"keepOg",!1),onChange:t=>{g(s.name,"keepOg",t)}})})));function Y(e,t,i){return window.enmity.utilities.findInReactTree(e,t,i)}function F(e){return window.enmity.assets.getIDByName(e)}const le=j("UserProfileSection"),se=z("getUserProfile"),[ae,ce]=B(T.byProps("transitionToGuild","openURL"),T.byProps("setString")),P=[{type:"domain",url:"",usage:"name"},{type:"twitter",url:"https://twitter.com/",usage:"name"},{type:"reddit",url:"https://www.reddit.com/user/",usage:"name"},{type:"github",url:"https://github.com/",usage:"name"},{type:"twitch",url:"https://www.twitch.tv/",usage:"name"},{type:"youtube",url:"https://www.youtube.com/channel/",usage:"id"},{type:"steam",url:"https://steamcommunity.com/profiles/",usage:"id"},{type:"spotify",url:"https://open.spotify.com/user/",usage:"id"}];function de({connection:e,userTheme:t}){let i=F(`img_account_sync_${e.type.replace("riotgames","riot")}_light_and_dark`);return i||(i=F(`img_account_sync_${e.type.replace("riotgames","riot")}_${t.replace("dark","white")}`)),e.type==="domain"&&(i=F("ic_globe_24px")),n.createElement(oe,{activeOpacity:.45,onPress:()=>{if(P.findIndex(m=>m.type==e.type)==-1)ce.setString(e.name);else{const m=P==null?void 0:P.find(d=>d.type==e.type);m&&ae.openURL((m==null?void 0:m.url)+((m==null?void 0:m.usage)=="name"?e.name:e.id))}}},n.createElement(V,{accessibilityLabel:e.type,source:i,style:{width:48,height:48}}))}var ue=({userId:e,theme:t})=>{const i=se.getUserProfile(e);if(!i)return null;const m=i.connectedAccounts;return m!=null&&m.length?(h(s.name,"mode","cozy"),n.createElement(le,{title:"Connections"},n.createElement(M,{horizontal:!0,style:{flexDirection:"row"}},m.map(d=>n.createElement(de,{connection:d,userTheme:t}))))):null};const $=q("show-connections"),ye=z("PRIMARY_INFO_TOP_OFFSET","SECONDARY_INFO_TOP_MARGIN","SIDE_PADDING"),we={...s,onStart(){$.after(ye.default,"type",(e,t,i)=>{var m,d,f,R,x,I,D,_,N;let u=(d=(m=Y(i,r=>{var l,a;return((l=r==null?void 0:r.type)==null?void 0:l.displayName)==="View"&&((a=r==null?void 0:r.props)==null?void 0:a.children.findIndex(O=>{var A;return((A=O==null?void 0:O.type)==null?void 0:A.name)==="UserProfileBio"}))!==-1}))==null?void 0:m.props)==null?void 0:d.children;const v=(f=Y(i,r=>{var l;return((l=r==null?void 0:r.type)==null?void 0:l.name)==="ThemeContextProvider"}))==null?void 0:f.props;if(v.primaryColor=335222,v.secondaryColor=4183545,!u)return i;const{userId:K}=(I=(x=(R=u==null?void 0:u.find(r=>{var l,a;return typeof((a=(l=r==null?void 0:r.props)==null?void 0:l.displayProfile)==null?void 0:a.userId)=="string"}))==null?void 0:R.props)==null?void 0:x.displayProfile)!=null?I:{},{bio:L}=(N=(_=(D=u==null?void 0:u.find(r=>{var l,a;return typeof((a=(l=r==null?void 0:r.props)==null?void 0:l.displayProfile)==null?void 0:a.bio)=="string"}))==null?void 0:D.props)==null?void 0:_.bio)!=null?N:{};if(console.log(L.length),console.log(L),!U(s.name,"keepOg",!1)){const r=u.findIndex(l=>{var a;return((a=l==null?void 0:l.type)==null?void 0:a.name)==="UserProfileConnections"});u.splice(r,1)}u.unshift(n.createElement(ue,{userId:K,theme:v==null?void 0:v.theme}))})},onStop(){$.unpatchAll()},getSettingsPanel({settings:e}){return n.createElement(re,{settings:e})}};W(we);
