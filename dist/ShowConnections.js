function $(e){window.enmity.plugins.registerPlugin(e)}const y=window.enmity.modules.common.Constants;window.enmity.modules.common.Clipboard,window.enmity.modules.common.Assets,window.enmity.modules.common.Messages,window.enmity.modules.common.Clyde,window.enmity.modules.common.Avatars,window.enmity.modules.common.Native;const t=window.enmity.modules.common.React;window.enmity.modules.common.Dispatcher,window.enmity.modules.common.Storage,window.enmity.modules.common.Toasts,window.enmity.modules.common.Dialog,window.enmity.modules.common.Token,window.enmity.modules.common.REST,window.enmity.modules.common.Settings,window.enmity.modules.common.Users,window.enmity.modules.common.Navigation,window.enmity.modules.common.NavigationNative,window.enmity.modules.common.NavigationStack,window.enmity.modules.common.Theme,window.enmity.modules.common.Linking;const k=window.enmity.modules.common.StyleSheet;window.enmity.modules.common.ColorMap,window.enmity.modules.common.Components,window.enmity.modules.common.Locale,window.enmity.modules.common.Profiles,window.enmity.modules.common.Lodash,window.enmity.modules.common.Logger,window.enmity.modules.common.Flux,window.enmity.modules.common.SVG,window.enmity.modules.common.Scenes,window.enmity.modules.common.Moment;const T={byProps:(...e)=>window.enmity.modules.filters.byProps(...e),byName:(e,n)=>window.enmity.modules.filters.byName(e,n),byTypeName:(e,n)=>window.enmity.modules.filters.byTypeName(e,n),byDisplayName:(e,n)=>window.enmity.modules.filters.byDisplayName(e,n)};function B(...e){return window.enmity.modules.bulk(...e)}function C(...e){return window.enmity.modules.getByProps(...e)}function j(...e){return window.enmity.modules.getByName(...e)}window.enmity.modules.common;function K(e){return window.enmity.patcher.create(e)}var W="ShowConnections",q="1.0.5",J="",Q=[{name:"FutureMapper",profile:"https://github.com/Futuremappermydud",id:"741727188809810181"}],X={source:"https://github.com/Futuremappermydud/Emnity-ShowConnections/",dist:"https://github.com/Futuremappermydud/Emnity-ShowConnections/blob/main/dist/ShowConnections.js"},m={name:W,version:q,description:J,authors:Q,links:X};const{components:o}=window.enmity;o.Alert,o.Button,o.FlatList;const U=o.Image;o.ImageBackground,o.KeyboardAvoidingView,o.Modal,o.Pressable,o.RefreshControl;const z=o.ScrollView;o.SectionList,o.StatusBar,o.StyleSheet,o.Switch;const v=o.Text;o.TextInput;const Z=o.TouchableHighlight,P=o.TouchableOpacity;o.TouchableWithoutFeedback,o.Touchable;const w=o.View;o.VirtualizedList,o.Form,o.FormArrow,o.FormCTA,o.FormCTAButton,o.FormCardSection,o.FormCheckbox,o.FormDivider,o.FormHint,o.FormIcon,o.FormInput,o.FormLabel;const S=o.FormRadio,p=o.FormRow;o.FormSection,o.FormSelect,o.FormSubLabel;const ee=o.FormSwitch;o.FormTernaryCheckBox,o.FormText,o.FormTextColors,o.FormTextSizes;function g(e,n,r){window.enmity.settings.set(e,n,r)}function h(e,n,r){return window.enmity.settings.get(e,n,r)}function V(e,n,r){return window.enmity.settings.getBoolean(e,n,r)}const M=(e=.1)=>({shadowColor:"#000",shadowOffset:{width:1,height:4},shadowOpacity:e,shadowRadius:4.65,elevation:8}),c=k.createThemedStyleSheet({container:{marginTop:25,marginLeft:"5%",marginBottom:-15,flexDirection:"row"},textContainer:{paddingLeft:15,paddingTop:5,flexDirection:"column",flexWrap:"wrap",...M},image:{width:75,height:75,borderRadius:10,...M},mainText:{opacity:.975,letterSpacing:.25},header:{color:y.ThemeColorMap.HEADER_PRIMARY,fontFamily:y.Fonts.DISPLAY_BOLD,fontSize:25,letterSpacing:.25},subHeader:{color:y.ThemeColorMap.HEADER_SECONDARY,fontSize:12.75}}),E=window.enmity.modules.common.Components.General.Animated,[H]=B(T.byProps("transitionToGuild","openURL"));var oe=({manifest:e})=>{const n=t.useRef(new E.Value(1)).current,r=()=>{E.spring(n,{toValue:1.1,duration:250,useNativeDriver:!0}).start()},i=()=>{E.spring(n,{toValue:1,duration:250,useNativeDriver:!0}).start()},s=()=>H.openURL(e.links.source),f={transform:[{scale:n}]};return t.createElement(w,{style:c.container},t.createElement(P,{onPress:s,onPressIn:r,onPressOut:i},t.createElement(E.View,{style:f},t.createElement(U,{style:[c.image],source:{uri:"https://cdn.discordapp.com/avatars/741727188809810181/8bb5f28abad304e8f5983d077bdf9ae9.png"}}))),t.createElement(w,{style:c.textContainer},t.createElement(P,{onPress:()=>H.openURL(e.links.source)},t.createElement(v,{style:[c.mainText,c.header]},e.name)),t.createElement(w,{style:{flexDirection:"row"}},t.createElement(v,{style:[c.mainText,c.subHeader]},"A project by ",e.authors[0].name)),t.createElement(w,null,t.createElement(P,{style:{flexDirection:"row"}},t.createElement(v,{style:[c.mainText,c.subHeader]},"Version:"),t.createElement(v,{style:[c.mainText,c.subHeader,{paddingLeft:4,fontFamily:y.Fonts.DISPLAY_BOLD}]},e.version)))))};const te=(e=.1)=>({shadowColor:"#000",shadowOffset:{width:1,height:4},shadowOpacity:e,shadowRadius:4.65,elevation:8}),ne=k.createThemedStyleSheet({container:{width:"90%",marginTop:25,marginLeft:"5%",borderRadius:10,backgroundColor:y.ThemeColorMap.BACKGROUND_MOBILE_SECONDARY,shadow:te}});var ie=({settings:e})=>t.createElement(z,null,t.createElement(oe,{manifest:m}),t.createElement(w,{style:[ne.container]},t.createElement(p,{label:"Compact",trailing:t.createElement(S,{selected:h(m.name,"mode","cozy")==="compact"}),onPress:()=>{g(m.name,"mode","compact")}}),t.createElement(p,{label:"Cozy",trailing:t.createElement(S,{selected:h(m.name,"mode","cozy")==="cozy"}),onPress:()=>{g(m.name,"mode","cozy")}}),t.createElement(p,{label:"Roomy",trailing:t.createElement(S,{selected:h(m.name,"mode","cozy")==="roomy"}),onPress:()=>{g(m.name,"mode","roomy")}}),t.createElement(p,{label:"Extreme",trailing:t.createElement(S,{selected:h(m.name,"mode","cozy")==="extreme"}),onPress:()=>{g(m.name,"mode","extreme")}}),t.createElement(p,{label:"Keep Original Connections",subLabel:"Whether to keep the original connections in popout or to hide them",trailing:t.createElement(ee,{value:V(m.name,"keepOg",!1),onChange:n=>{g(m.name,"keepOg",n)}})})));function G(e,n,r){return window.enmity.utilities.findInReactTree(e,n,r)}function F(e){return window.enmity.assets.getIDByName(e)}const re=j("UserProfileSection"),me=C("getUserProfile"),[le,se]=B(T.byProps("transitionToGuild","openURL"),T.byProps("setString")),R=[{type:"domain",url:"",usage:"name"},{type:"twitter",url:"https://twitter.com/",usage:"name"},{type:"reddit",url:"https://www.reddit.com/user/",usage:"name"},{type:"github",url:"https://github.com/",usage:"name"},{type:"twitch",url:"https://www.twitch.tv/",usage:"name"},{type:"youtube",url:"https://www.youtube.com/channel/",usage:"id"},{type:"steam",url:"https://steamcommunity.com/profiles/",usage:"id"},{type:"spotify",url:"https://open.spotify.com/user/",usage:"id"}];function ae({connection:e,userTheme:n}){let r=F(`img_account_sync_${e.type.replace("riotgames","riot")}_light_and_dark`);return r||(r=F(`img_account_sync_${e.type.replace("riotgames","riot")}_${n.replace("dark","white")}`)),e.type==="domain"&&(r=F("ic_globe_24px")),t.createElement(Z,{activeOpacity:.45,onPress:()=>{if(R.findIndex(i=>i.type==e.type)==-1)se.setString(e.name);else{const i=R==null?void 0:R.find(s=>s.type==e.type);i&&le.openURL((i==null?void 0:i.url)+((i==null?void 0:i.usage)=="name"?e.name:e.id))}}},t.createElement(U,{accessibilityLabel:e.type,source:r,style:{width:48,height:48}}))}var ce=({userId:e,theme:n})=>{const r=me.getUserProfile(e);if(!r)return null;const i=r.connectedAccounts;return i!=null&&i.length?(h(m.name,"mode","cozy"),t.createElement(re,{title:"Connections"},t.createElement(z,{horizontal:!0,style:{flexDirection:"row"}},i.map(s=>t.createElement(ae,{connection:s,userTheme:n}))))):null};const x=K("show-connections"),ue=C("PRIMARY_INFO_TOP_OFFSET","SECONDARY_INFO_TOP_MARGIN","SIDE_PADDING"),Y=C("getUserProfile");function de(e){if(e==null)return null;const n=e.match(/\u{e005b}\u{e0023}([\u{e0061}-\u{e0066}\u{e0041}-\u{e0046}\u{e0030}-\u{e0039}]+?)\u{e002c}\u{e0023}([\u{e0061}-\u{e0066}\u{e0041}-\u{e0046}\u{e0030}-\u{e0039}]+?)\u{e005d}/u);if(n!=null){const r=[...n[0]].map(i=>String.fromCodePoint(i.codePointAt(0)-917504)).join("");return r.substring(1,r.length-1).split(",").map(i=>parseInt(i.replace("#","0x"),16))}else return null}const ye={...m,onStart(){x.instead(Y,"getUserProfile",(e,n,r)=>{console.log("1");let i=r.apply(e,n);if(console.log("2"),i!=null&&i.themeColors)return i;console.log("3");const s=de(i==null?void 0:i.bio);return console.log("4"),s&&(console.log("5"),i.themeColors=s,console.log("6"),i.premiumType=2),i}),x.after(ue.default,"type",(e,n,r)=>{var i,s,f,I,D,N;let d=(s=(i=G(r,l=>{var a,u;return((a=l==null?void 0:l.type)==null?void 0:a.displayName)==="View"&&((u=l==null?void 0:l.props)==null?void 0:u.children.findIndex(O=>{var A;return((A=O==null?void 0:O.type)==null?void 0:A.name)==="UserProfileBio"}))!==-1}))==null?void 0:i.props)==null?void 0:s.children;const b=(f=G(r,l=>{var a;return((a=l==null?void 0:l.type)==null?void 0:a.name)==="ThemeContextProvider"}))==null?void 0:f.props;if(b.primaryColor=335222,b.secondaryColor=4183545,!d)return r;const{userId:_}=(N=(D=(I=d==null?void 0:d.find(l=>{var a,u;return typeof((u=(a=l==null?void 0:l.props)==null?void 0:a.displayProfile)==null?void 0:u.userId)=="string"}))==null?void 0:I.props)==null?void 0:D.displayProfile)!=null?N:{},L=Y.getUserProfile(_);if(console.log(L.bio.length),console.log(L.bio),!V(m.name,"keepOg",!1)){const l=d.findIndex(a=>{var u;return((u=a==null?void 0:a.type)==null?void 0:u.name)==="UserProfileConnections"});d.splice(l,1)}d.unshift(t.createElement(ce,{userId:_,theme:b==null?void 0:b.theme}))})},onStop(){x.unpatchAll()},getSettingsPanel({settings:e}){return t.createElement(ie,{settings:e})}};$(ye);
